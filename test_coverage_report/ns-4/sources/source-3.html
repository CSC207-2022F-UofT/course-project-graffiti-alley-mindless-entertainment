


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > EnemyFactory</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">battle.factories</a>
</div>

<h1>Coverage Summary for Class: EnemyFactory (battle.factories)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">EnemyFactory</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    81.5%
  </span>
  <span class="absValue">
    (44/54)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package battle.factories;
&nbsp;
&nbsp;import battle.use_cases.gimmick.GimmickStrategy;
&nbsp;import battle.entities.gimmick.GimmickType;
&nbsp;import battle.entities.gimmick.StatGimmickEntity;
&nbsp;import battle.use_cases.gimmick.StatGimmickStrategy;
&nbsp;import database.managers.AIDataManager;
&nbsp;import database.managers.EnemyDataManager;
&nbsp;import database.managers.GimmickDataManager;
&nbsp;import database.managers.SkillDataManager;
&nbsp;import database.entities.EnemyData;
&nbsp;import database.entities.GimmickData;
&nbsp;import battle.entities.SkillType;
&nbsp;import battle.entities.EnemyInfo;
&nbsp;import battle.use_cases.ai.EnemyAI;
&nbsp;import character.BossFacade;
&nbsp;import character.EnemyFacade;
&nbsp;import character.EnemyFighter;
&nbsp;
&nbsp;/**
&nbsp; * This class creates EnemyFighter object using the given name. It uses EnemyAIFactory and
&nbsp; * EnemyInfoFactory to creates the instance of enemyFighter
&nbsp; *
&nbsp; */
&nbsp;public class EnemyFactory {
&nbsp;    /**
&nbsp;     * enemyDatabase: This is used to get information about the enemies from the database
&nbsp;     * enemyInfoFactory: factory used to create the enemyInfo that this enemy has
&nbsp;     * enemyAUFactory: factory used to create an AI that this enemy has
&nbsp;     * gimmickDataManager: Manager used to get the information about the gimmick from the database
&nbsp;     */
&nbsp;    private final EnemyDataManager enemyDatabase;
&nbsp;    private final EnemyInfoFactory enemyInfoFactory;
&nbsp;    private final EnemyAIFactory enemyAIFactory;
&nbsp;    private final GimmickDataManager gimmickDataManager;
&nbsp;
&nbsp;    /**
&nbsp;     * This is the constructor of EnemyFactory
&nbsp;     */
<b class="fc">&nbsp;    public EnemyFactory() {</b>
<b class="fc">&nbsp;        this.enemyDatabase = new EnemyDataManager();</b>
<b class="fc">&nbsp;        AIDataManager aiDataManager = new AIDataManager();</b>
<b class="fc">&nbsp;        SkillDataManager skillDataManager = new SkillDataManager();</b>
<b class="fc">&nbsp;        this.enemyInfoFactory = new EnemyInfoFactory(skillDataManager);</b>
<b class="fc">&nbsp;        this.enemyAIFactory = new EnemyAIFactory(aiDataManager);</b>
<b class="fc">&nbsp;        this.gimmickDataManager = new GimmickDataManager();</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    private EnemyData getEnemyData(String name){
<b class="fc">&nbsp;        return this.enemyDatabase.fetchEnemyData(name);</b>
&nbsp;    }
&nbsp;
&nbsp;    private EnemyInfo getEnemyInfo(EnemyData enemyData){
<b class="fc">&nbsp;        return this.enemyInfoFactory.createEnemyInfo(enemyData);</b>
&nbsp;    }
&nbsp;
&nbsp;    private EnemyAI getEnemyAI(EnemyData enemyData, EnemyInfo enemyInfo){
<b class="fc">&nbsp;        return this.enemyAIFactory.createEnemyAI(enemyData, enemyInfo);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This method returns the enemy instance using the information given by database
&nbsp;     * @param name of the enemy to create
&nbsp;     * @return instance of enemy
&nbsp;     */
&nbsp;    public EnemyFighter createEnemy(String name) {
<b class="fc">&nbsp;        EnemyData enemyData = getEnemyData(name);</b>
<b class="fc">&nbsp;        EnemyInfo enemyInfo = getEnemyInfo(getEnemyData(name));</b>
<b class="fc">&nbsp;        if (!(enemyData.gimmick == null)) {</b>
<b class="fc">&nbsp;            return new BossFacade(name, enemyInfo, getEnemyAI(getEnemyData(name),</b>
<b class="fc">&nbsp;                    getEnemyInfo(getEnemyData(name))), translateGimmick(enemyData.gimmick, enemyInfo));</b>
&nbsp;        }
<b class="fc">&nbsp;        return new EnemyFacade(name, getEnemyInfo(getEnemyData(name)), getEnemyAI(getEnemyData(name),</b>
<b class="fc">&nbsp;                getEnemyInfo(getEnemyData(name))));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This method returns the type gimmick depending on the string in the database
&nbsp;     * @param name of the enemy to create
&nbsp;     * @param enemyInfo EnemeyInfo of the name given
&nbsp;     * @return gimmick that the enemy has (from the database)
&nbsp;     */
&nbsp;    public GimmickStrategy translateGimmick(String name, EnemyInfo enemyInfo) {
<b class="fc">&nbsp;        switch (name) {</b>
&nbsp;            case &quot;health&quot;:{
<b class="fc">&nbsp;                GimmickData healthGimmickData = this.gimmickDataManager.fetchGimmickData(name);</b>
<b class="fc">&nbsp;                int triggerHealth = Integer.parseInt(healthGimmickData.trigger);</b>
<b class="fc">&nbsp;                StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.HEALTH,</b>
<b class="fc">&nbsp;                        enemyInfo, triggerHealth).build();</b>
<b class="fc">&nbsp;                return new StatGimmickStrategy(gimmick);</b>
&nbsp;            }
&nbsp;            case &quot;attack&quot;:{
<b class="fc">&nbsp;                GimmickData attackGimmickData = this.gimmickDataManager.fetchGimmickData(name);</b>
<b class="fc">&nbsp;                int triggerHealth = Integer.parseInt(attackGimmickData.trigger);</b>
<b class="fc">&nbsp;                double attackIncrease = Double.parseDouble(attackGimmickData.attack);</b>
<b class="fc">&nbsp;                StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.ATTACK, enemyInfo,</b>
<b class="fc">&nbsp;                        triggerHealth).setAttackIncrease(attackIncrease).build();</b>
<b class="fc">&nbsp;                return new StatGimmickStrategy(gimmick);</b>
&nbsp;            }
&nbsp;            case &quot;speed&quot;:{
<b class="fc">&nbsp;                GimmickData speedGimmickData = this.gimmickDataManager.fetchGimmickData(name);</b>
<b class="fc">&nbsp;                int triggerHealth = Integer.parseInt(speedGimmickData.trigger);</b>
<b class="fc">&nbsp;                int speedIncrease = Integer.parseInt(speedGimmickData.speed);</b>
<b class="fc">&nbsp;                StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.SPEED, enemyInfo,</b>
<b class="fc">&nbsp;                        triggerHealth).setSpeedIncrease(speedIncrease).build();</b>
<b class="fc">&nbsp;                return new StatGimmickStrategy(gimmick);</b>
&nbsp;            }
&nbsp;            case &quot;type&quot;:{
<b class="fc">&nbsp;                GimmickData typeGimmickData = this.gimmickDataManager.fetchGimmickData(name);</b>
<b class="fc">&nbsp;                int triggerHealth = Integer.parseInt(typeGimmickData.trigger);</b>
<b class="fc">&nbsp;                SkillType type = enemyInfo.getType();</b>
<b class="fc">&nbsp;                if(type == SkillType.WATER){</b>
<b class="nc">&nbsp;                    StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.TYPE, enemyInfo,</b>
<b class="nc">&nbsp;                            triggerHealth).setNewType(SkillType.FIRE).build();</b>
<b class="nc">&nbsp;                    return new StatGimmickStrategy(gimmick);</b>
<b class="fc">&nbsp;                } else if(type == SkillType.FIRE){</b>
<b class="nc">&nbsp;                    StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.TYPE, enemyInfo,</b>
<b class="nc">&nbsp;                            triggerHealth).setNewType(SkillType.EARTH).build();</b>
<b class="nc">&nbsp;                    return new StatGimmickStrategy(gimmick);</b>
<b class="fc">&nbsp;                } else if(type == SkillType.EARTH){</b>
<b class="nc">&nbsp;                    StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.TYPE, enemyInfo,</b>
<b class="nc">&nbsp;                            triggerHealth).setNewType(SkillType.AIR).build();</b>
<b class="nc">&nbsp;                    return new StatGimmickStrategy(gimmick);</b>
&nbsp;                } else{
<b class="fc">&nbsp;                    StatGimmickEntity gimmick = new StatGimmickEntity.StatGimmickBuilder(GimmickType.TYPE, enemyInfo,</b>
<b class="fc">&nbsp;                            triggerHealth).setNewType(SkillType.WATER).build();</b>
<b class="fc">&nbsp;                    return new StatGimmickStrategy(gimmick);</b>
&nbsp;                }
&nbsp;
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-12-08 23:21</div>
</div>
</body>
</html>
